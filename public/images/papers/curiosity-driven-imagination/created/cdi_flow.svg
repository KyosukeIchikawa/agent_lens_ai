<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="800" height="600" viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
  <!-- 背景と全体フレーム - 透過背景に変更 -->
  <rect x="10" y="10" width="780" height="580" rx="15" ry="15" fill="none" stroke="#333333" stroke-width="2" />
  <text x="400" y="45" font-family="Roboto, sans-serif" font-size="22" font-weight="bold" text-anchor="middle">Curiosity-Driven Imaginationのフロー</text>
  
  <!-- フェーズ1: 計画失敗 -->
  <rect x="100" y="90" width="600" height="90" rx="10" ry="10" fill="#e8f4fd" stroke="#3498db" stroke-width="2" />
  <text x="400" y="115" font-family="Roboto, sans-serif" font-size="18" font-weight="bold" text-anchor="middle">Phase 1: 計画失敗（Plan Failure）</text>
  <text x="400" y="145" font-family="Noto Sans JP, sans-serif" font-size="14" text-anchor="middle">計画ベースのエージェント（PRM）が環境内で行動計画の実行に失敗</text>
  <text x="400" y="165" font-family="Noto Sans JP, sans-serif" font-size="14" text-anchor="middle">未知の状態遷移や予期せぬ障害に遭遇</text>
  
  <!-- フェーズ2: 好奇心駆動型探索 -->
  <rect x="100" y="200" width="600" height="90" rx="10" ry="10" fill="#e8f8f1" stroke="#2ecc71" stroke-width="2" />
  <text x="400" y="225" font-family="Roboto, sans-serif" font-size="18" font-weight="bold" text-anchor="middle">Phase 2: 好奇心駆動型探索（Curiosity-Driven Exploration）</text>
  <text x="400" y="255" font-family="Noto Sans JP, sans-serif" font-size="14" text-anchor="middle">内発的好奇心モジュール（ICM）が予測誤差に基づく報酬を生成</text>
  <text x="400" y="275" font-family="Noto Sans JP, sans-serif" font-size="14" text-anchor="middle">強化学習エージェントが新しい状態遷移を探索・発見</text>
  
  <!-- フェーズ3: 演算子抽象化 -->
  <rect x="100" y="310" width="600" height="90" rx="10" ry="10" fill="#fceae8" stroke="#e74c3c" stroke-width="2" />
  <text x="400" y="335" font-family="Roboto, sans-serif" font-size="18" font-weight="bold" text-anchor="middle">Phase 3: 演算子抽象化（Operator Abstraction）</text>
  <text x="400" y="365" font-family="Noto Sans JP, sans-serif" font-size="14" text-anchor="middle">発見された状態遷移から新しい演算子を抽象化</text>
  <text x="400" y="385" font-family="Noto Sans JP, sans-serif" font-size="14" text-anchor="middle">学習した遷移から前提条件と効果を持つ演算子を生成</text>
  
  <!-- フェーズ4: 計画知識の拡張 -->
  <rect x="100" y="420" width="600" height="90" rx="10" ry="10" fill="#e8f4fd" stroke="#3498db" stroke-width="2" />
  <text x="400" y="445" font-family="Roboto, sans-serif" font-size="18" font-weight="bold" text-anchor="middle">Phase 4: 計画知識の拡張（Knowledge Expansion）</text>
  <text x="400" y="475" font-family="Noto Sans JP, sans-serif" font-size="14" text-anchor="middle">新しく抽象化された演算子をPRMの知識ベースに統合</text>
  <text x="400" y="495" font-family="Noto Sans JP, sans-serif" font-size="14" text-anchor="middle">拡張された知識を用いて新たな計画を生成</text>
  
  <!-- 矢印の定義 -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" />
    </marker>
  </defs>
  
  <!-- フェーズ間の接続矢印 -->
  <path d="M 400 180 L 400 200" fill="none" stroke="#333333" stroke-width="2" marker-end="url(#arrowhead)" />
  <path d="M 400 290 L 400 310" fill="none" stroke="#333333" stroke-width="2" marker-end="url(#arrowhead)" />
  <path d="M 400 400 L 400 420" fill="none" stroke="#333333" stroke-width="2" marker-end="url(#arrowhead)" />
  
  <!-- サイクルを示す矢印 (Phase 4 -> Phase 1) -->
  <path d="M 100 465 C 50 465, 50 135, 100 135" fill="none" stroke="#333333" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead)" />
  <text x="65" y="300" font-family="Noto Sans JP, sans-serif" font-size="14" text-anchor="middle" transform="rotate(-90, 65, 300)">適応サイクル</text>
  
  <!-- 説明テキスト -->
  <text x="400" y="545" font-family="Noto Sans JP, sans-serif" font-size="14" text-anchor="middle" fill="#333333">このサイクルを繰り返すことで、エージェントは未知環境に対して継続的に適応・学習する</text>
  <text x="400" y="565" font-family="Noto Sans JP, sans-serif" font-size="14" text-anchor="middle" fill="#333333">好奇心によって発見された新たな演算子が計画能力を拡張する</text>
</svg>